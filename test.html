<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Custom Tooltip Example</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
      .vega-tooltip {
        font-family: "Poppins", sans-serif;
        font-size: 14px;
        color: #222;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 6px;
        padding: 8px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
      }
      .vega-tooltip img {
        border-radius: 8px;
        margin-top: 4px;
      }
    </style>
  </head>
  <body>
    <div id="vis"></div>
    <script>
      const spec2 = "js/strip.vg.json";
      const spec = {
        $schema: "https://vega.github.io/schema/vega-lite/v5.json",
        data: {
          values: [
            { product: "Laptops", sales: 128000, growth: 0.12 },
            { product: "Monitors", sales: 86000, growth: 0.08 },
            { product: "Keyboards", sales: 54000, growth: 0.05 },
            { product: "Headsets", sales: 38000, growth: 0.03 },
          ],
        },
        mark: "bar",
        encoding: {
          x: { field: "product", type: "nominal" },
          y: { field: "sales", type: "quantitative" },
          tooltip: [
            { field: "product", type: "nominal", title: "Product" },
            {
              field: "sales",
              type: "quantitative",
              title: "Revenue",
              format: "$,.0f",
            },
            {
              field: "growth",
              type: "quantitative",
              title: "YoY growth",
              format: "+.1%",
            },
          ],
        },
      };
      const htmlTooltipOptions = {
        theme: "dark", // optional styling theme
        sanitize: (value) => value, // override sanitization to allow custom HTML
        formatTooltip: (value) => {
          //const datum = value?.datum ?? value;
          // return your handcrafted HTML string using datum fields
          return `
      <div style="font-family:sans-serif;font-size:14px;">
        <strong>${value.Product}</strong><br>
        <img src="https://upload.wikimedia.org/wikipedia/en/8/86/Elton_John_-_Goodbye_Yellow_Brick_Road.jpg" width="100">
      </div>
    `;
        },
      };

      vegaEmbed("#vis", spec, { tooltip: htmlTooltipOptions })
        .then(console.log)
        .catch(console.error);
    </script>
  </body>
</html>
