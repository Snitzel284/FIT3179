{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "background": "#FFF9E6",
  "params": [
    {
      "name": "Field",
      "value": "Danceability",
      "bind": {
        "input": "select",
        "options": [
          "Danceability",
          "Energy",
          "Acousticness",
          "Liveness",
          "Valence"
        ],
        "name": "Select Trait: "
      }
    }
  ],

  "vconcat": [
    {
      "view": { "stroke": null },
      "width": 1000,
      "height": 500,
      "projection": {
        "type": "equalEarth"
      },
      "layer": [
        {
          "data": {
            "sphere": true
          },
          "mark": {
            "type": "geoshape",
            "fill": "#cce6ff",
            "stroke": null
          }
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/Snitzel284/FIT3179/main/js/worldMap.topojson",
            "format": { "type": "topojson", "feature": "ne_110m_graticules_30" }
          },
          "mark": { "type": "geoshape", "fill": null, "stroke": "lightgrey" }
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/Snitzel284/FIT3179/main/js/worldMap.topojson",
            "format": {
              "type": "topojson",
              "feature": "ne_110m_admin_0_countries"
            }
          },
          "transform": [{ "calculate": "0", "as": "No. Concerts" }],
          "mark": {
            "type": "geoshape",
            "fill": "lightgrey",
            "stroke": "black"
          },
          "encoding": {
            "tooltip": [
              {
                "field": "properties.NAME",
                "type": "nominal",
                "title": "Country"
              },
              { "field": "No. Concerts", "type": "quantitative" }
            ]
          }
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/Snitzel284/FIT3179/main/data/Concerts.csv",
            "format": { "type": "csv" }
          },
          "transform": [
            { "filter": { "param": "time_brush" } },
            {
              "aggregate": [{ "op": "count", "as": "Concerts" }],
              "groupby": ["Country"]
            },
            {
              "lookup": "Country",
              "from": {
                "data": {
                  "url": "https://raw.githubusercontent.com/Snitzel284/FIT3179/main/js/worldMap.topojson",
                  "format": {
                    "type": "topojson",
                    "feature": "ne_110m_admin_0_countries"
                  }
                },
                "key": "properties.NAME"
              },
              "as": "geo"
            },
            {
              "lookup": "Country",
              "from": {
                "data": {
                  "url": "https://raw.githubusercontent.com/Snitzel284/FIT3179/main/data/countrySize.csv",
                  "format": { "type": "csv" }
                },
                "key": "country",
                "fields": ["area"]
              },
              "as": "area"
            },
            { "calculate": "datum.area/100000", "as": "area" },
            { "calculate": "datum.Concerts", "as": "Concerts" }
          ],
          "mark": { "type": "geoshape", "stroke": "black" },
          "encoding": {
            "shape": { "field": "geo", "type": "geojson" },
            "color": {
              "field": "Concerts",
              "type": "quantitative",
              "scale": {
                "type": "threshold",
                "domain": [10, 20, 50, 100, 200, 500, 1000],

                "range": [
                  "#f5e6ff",
                  "#e5c6ff",
                  "#d3a3ff",
                  "#bf7dff",
                  "#a857ff",
                  "#8b2aff",
                  "#6610d9",
                  "#3c007a"
                ]
              },
              "legend": {
                "title": "No. Concerts",
                "orient": "top-right",
                "offset": 0,
                "labelFont": "Arial",
                "labelFontSize": 12,
                "titleFont": "Arial",
                "titleFontSize": 14
              }
            },

            "tooltip": [
              { "field": "Country", "type": "nominal", "title": "Country" },
              {
                "field": "Concerts",
                "type": "quantitative",
                "title": "No. Concerts"
              }
            ]
          }
        }
      ]
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Snitzel284/FIT3179/main/data/Concerts.csv",
        "format": { "type": "csv" }
      },

      "params": [
        {
          "name": "time_brush",
          "select": { "type": "interval", "encodings": ["x"] }
        }
      ],
      "title": {
        "text": "Number of Elton John Concerts by Year (Use To Filter)",
        "fontSize": 18,
        "font": "Arial"
      },
      "width": 1000,
      "height": 70,
      "view": { "stroke": null, "fill": "white" },
      "mark": "line",
      "encoding": {
        "x": {
          "field": "Year",
          "type": "temporal",
          "timeUnit": "year",
          "axis": {
            "labelAngle": 0,
            "labelLimit": 300,
            "titleFontSize": 16,
            "labelFontSize": 12,
            "title": "Year",
            "titleFont": "Arial",
            "labelFont": "Arial"
          },

          "sort": {
            "field": "Year",
            "op": "min"
          }
        },
        "y": {
          "field": "Year",
          "aggregate": "count",
          "type": "quantitative",
          "title": "No. Concerts",
          "axis": {
            "titleFontSize": 14,
            "labelFontSize": 12,
            "titleFont": "Arial",
            "labelFont": "Arial"
          }
        },
        "tooltip": [
          {
            "field": "Year",
            "type": "temporal",
            "title": "Year",
            "format": "%Y"
          },
          {
            "field": "Year",
            "aggregate": "count",
            "type": "quantitative",
            "title": "No. of Concerts"
          }
        ]
      }
    },
    {
      "mark": "text",
      "height": 100,
      "width": 1000,
      "view": { "stroke": null }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Snitzel284/FIT3179/main/data/EltonJohnAlbumTracks.csv",
        "format": { "type": "csv" }
      },
      "width": 1000,
      "height": 300,
      "view": { "stroke": null, "fill": "white" },
      "layer": [
        {
          "transform": [
            {
              "calculate": "datum[Field]",
              "as": "dynamicField"
            },
            {
              "calculate": "Field",
              "as": "Field"
            }
          ],
          "title": {
            "text": { "expr": "Field + ' of Elton John Albums'" },
            "fontSize": 20,
            "font": "Arial"
          },

          "mark": {
            "type": "circle",
            "opacity": 1,
            "size": 30
          },
          "encoding": {
            "detail": [
              {
                "field": "Year",
                "type": "temporal",
                "timeUnit": "year"
              },
              {
                "field": "Field",
                "type": "nominal"
              }
            ],
            "x": {
              "field": "Album",
              "type": "nominal",
              "sort": {
                "field": "Year",
                "op": "min"
              },
              "axis": {
                "labelAngle": 45,
                "labelLimit": 300,
                "titleFontSize": 16,
                "labelFontSize": 12,
                "titleFont": "Arial",
                "labelFont": "Arial",
                "titlePadding": 10
              }
            },
            "y": {
              "field": "dynamicField",
              "type": "quantitative",

              "axis": {
                "titleFontSize": 14,
                "labelFontSize": 12,
                "titleFont": "Arial",
                "labelFont": "Arial",
                "title": { "expr": "Field" }
              },
              "scale": { "domain": [0, 1] }
            },
            "color": {
              "condition": {
                "param": "time_brush",
                "field": "Album",
                "type": "nominal",
                "scale": {
                  "range": [
                    "#f4c542",
                    "#e59400",
                    "#c85a17",
                    "#b22222",
                    "#e52b50",
                    "#c71585",
                    "#8b008b",
                    "#6a0dad",
                    "#483d8b",
                    "#4169e1",
                    "#1e90ff",
                    "#00ced1",
                    "#20b2aa",
                    "#3cb371",
                    "#2e8b57",
                    "#556b2f",
                    "#bdb76b",
                    "#daa520",
                    "#ffd700",
                    "#ffb6c1",
                    "#fa8072",
                    "#ff69b4",
                    "#db7093",
                    "#8b4513",
                    "#a0522d",
                    "#696969",
                    "#483c32",
                    "#000000"
                  ]
                },
                "legend": null,
                "sort": { "field": "Year", "op": "min" }
              },
              "value": "lightgray"
            },

            "tooltip": [
              { "field": "Track", "type": "nominal", "title": "Track" },
              { "field": "Album", "type": "nominal", "title": "Album" },
              {
                "field": "dynamicField",
                "type": "quantitative",
                "title": "Score"
              },
              { "field": "Field", "type": "nominal" }
            ]
          }
        },
        {
          "transform": [
            {
              "calculate": "datum[Field]",
              "as": "dynamicField"
            },
            {
              "calculate": "Field",
              "as": "Field"
            }
          ],
          "mark": {
            "type": "tick",
            "color": "black",
            "strokeWidth": 20,
            "thickness": 3,
            "size": 30
          },
          "encoding": {
            "detail": [
              {
                "field": "Field",
                "type": "nominal"
              },
              {
                "field": "Year",
                "type": "temporal",
                "timeUnit": "year"
              }
            ],
            "y": {
              "field": "dynamicField",
              "aggregate": "mean",
              "type": "quantitative"
            },
            "x": {
              "field": "Album",
              "type": "nominal",
              "sort": { "field": "Year", "op": "min" }
            },
            "color": {
              "condition": {
                "param": "time_brush",
                "field": "Album",
                "type": "nominal",
                "scale": {
                  "range": [
                    "#f4c542",
                    "#e59400",
                    "#c85a17",
                    "#b22222",
                    "#e52b50",
                    "#c71585",
                    "#8b008b",
                    "#6a0dad",
                    "#483d8b",
                    "#4169e1",
                    "#1e90ff",
                    "#00ced1",
                    "#20b2aa",
                    "#3cb371",
                    "#2e8b57",
                    "#556b2f",
                    "#bdb76b",
                    "#daa520",
                    "#ffd700",
                    "#ffb6c1",
                    "#fa8072",
                    "#ff69b4",
                    "#db7093",
                    "#8b4513",
                    "#a0522d",
                    "#696969",
                    "#483c32",
                    "#000000"
                  ]
                },
                "legend": null,
                "sort": { "field": "Year", "op": "min" }
              },
              "value": "lightgray"
            },
            "tooltip": [
              { "field": "Album", "type": "nominal", "title": "Album" },
              {
                "field": "dynamicField",
                "aggregate": "mean",
                "type": "quantitative",
                "title": "Avg",
                "format": ".3f"
              },
              { "field": "Field", "type": "nominal" }
            ]
          }
        }
      ]
    },
    {
      "mark": "text",
      "height": -30,
      "width": 1000,
      "view": { "stroke": null, "fill": "#FFF9E6" },
      "title": {
        "text": { "expr": "Field" },
        "fontSize": 35,
        "font": "Arial"
      }
    },
    {
      "hconcat": [
        {
          "data": {
            "values": {
              "Danceability": "\nDanceability is a measure from 0.0 to 1.0 describing\nhow suitable a track is for dancing. Tracks with high\ndanceability values (0.7 or above) are typically upbeat, fast,\nand energetic. Tracks with low danceability values\n(0.3 or below) are usually slower, quieter, and less rhythmic.",
              "Energy": "Energy is a measure from 0.0 to 1.0 that represents a\nperceptual measure of intensity and activity. Typically, energetic\ntracks feel fast, loud, and noisy. For example, death metal has\nhigh energy, while a Bach prelude scores low on the scale.\nFeatures contributing to this attribute include dynamic range,\nperceived loudness, timbre, onset rate, and general entropy.",
              "Acousticness": "\n\nAcousticness is a confidence measure from 0.0 to 1.0\nof whether the track is acoustic. A value of 1.0\nrepresents high confidence that the track is acoustic.",
              "Liveness": "\nLiveness detects the presence of an audience in the\nrecording. Higher liveness values represent an increased\nprobability that the track was performed live. A value above\n0.8 provides strong likelihood that the track is live.",
              "Valence": "\nA measure from 0.0 to 1.0 describing the musical positiveness\nconveyed by a track. Tracks with high valence sound more\npositive (e.g. happy, cheerful, euphoric), while tracks with\nlow valence sound more negative (e.g. sad, depressed, angry)."
            }
          },
          "transform": [
            {
              "calculate": "datum[Field]",
              "as": "dynamicField"
            }
          ],
          "mark": {
            "type": "text",
            "font": "Arial",
            "fontSize": 16,
            "fontWeight": "normal",
            "color": "black",
            "align": "center",
            "limit": 940,
            "lineBreak": "\n",
            "yOffset": -50
          },
          "height": 150,
          "width": 475,
          "view": { "stroke": null, "fill": "white" },
          "encoding": {
            "text": { "field": "dynamicField", "type": "nominal" },
            "tooltip": null
          }
        },
        {
          "data": {
            "values": {
              "Danceability": "\nElton John's music often features upbeat tempos,\nrhythmic patterns, and catchy melodies that make his tracks\nsuitable for dancing. Songs like 'Crocodile Rock' and\n'I'm Still Standing' exemplify high danceability with their\nenergetic beats and lively arrangements.",
              "Energy": "\nElton John's music is characterised by its dynamic range\nand vibrant instrumentation, contributing to high energy levels.\nTracks like 'Saturday Night's Alright for Fighting' and\n'Bennie and the Jets' showcase energetic performances\nwith powerful vocals and lively arrangements.",
              "Acousticness": "\nWhile Elton John is known for his piano-driven ballads,\nhis music often incorporates a blend of acoustic and electric\nelements. Songs like 'Your Song' and 'Tiny Dancer' feature\nacoustic instrumentation, highlighting his versatility as an artist.",
              "Liveness": "\nElton John's live performances are renowned for their\nenergy and audience engagement. Live recordings of songs\nlike 'Restless' and 'I'm Still Standing' capture the\naudience's excitement at his Wembley Stadium concert,\nand therefore these showcase high liveness values.",
              "Valence": "\nElton John's music often conveys positive emotions\nthrough uplifting melodies and heartfelt lyrics.\nSongs like 'Can You Feel the Love Tonight' and\n'Circle of Life' evoke feelings of joy and optimism,\nreflecting high valence in his musical style."
            }
          },
          "transform": [
            {
              "calculate": "datum[Field]",
              "as": "dynamicField"
            }
          ],
          "mark": {
            "type": "text",
            "font": "Arial",
            "fontSize": 16,
            "fontWeight": "normal",
            "color": "black",
            "align": "center",
            "limit": 940,
            "lineBreak": "\n",
            "yOffset": -50
          },
          "height": 150,
          "width": 475,
          "view": { "stroke": null, "fill": "white" },
          "encoding": {
            "text": { "field": "dynamicField", "type": "nominal" },
            "tooltip": null
          }
        }
      ],
      "spacing": 50
    },
    {
      "mark": "text",
      "height": 5,
      "width": 1000,
      "view": { "stroke": null, "fill": "#FFF9E6" }
    }
  ],

  "spacing": 30
}
